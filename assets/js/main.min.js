$(function(){if($("body").scrollspy({target:"#menu"}),$("#menu a").click(function(e){if(-1!==$(this).attr("href").indexOf("#")){var t=$($(this).attr("href"));if(t.length&&t.hasClass("page")){var n=t.offset().top;$("html, body").animate({scrollTop:n},700,"easeInCubic")}e.preventDefault()}}),$(".slideshow").length){var e=$(".slideshow").not(".panorama");e.imagesLoaded(function(){e.find("ul.items").caroufredsel({items:1,auto:!1,responsive:!0,pagination:e.find(".pages"),next:e.find(".controls .next"),prev:e.find(".controls .prev"),scroll:{items:1,fx:"crossfade"}})})}$(".search form input[name=q]").keyup(function(e){var t=$(this),n=t.parents("form:first"),a=n.parent().find(".search-resluts");console.log(a),t.val().length>3&&"enter"!==e.key?(t.addClass("loading"),a.empty(),a.is(":hidden")||a.fadeOut("fast"),n.find("input[name=t]").val($.now()),n.find("input[name=format]").val("raw"),$.ajax({url:"index.php?option=com_k2&view=itemlist&task=search",type:"get",data:n.serialize(),success:function(e){t.removeClass("loading"),a.html(e).fadeIn("fast")}})):(a.empty(),a.is(":hidden")||a.fadeOut("fast"))}),$(document).on("focusout",".search form",function(){$(".search .search-resluts").fadeOut("fast")}).on("focusin",".search form",function(){$(".search .search-resluts").is(":empty")||$(".search .search-resluts").fadeIn("fast")}),$(".panel.tiles").on("click",".tiles a",function(e){for(var t=[300,500,600,600],n=$(".panel.tiles").find(".tiles li"),a=$(".panel.tiles").children(".tiles"),i=($(this).attr("data-catid"),$(".panel.tiles").find(".itemlist")),r=0,s=1;4>s;s++)n.eq(s-1).fadeOut(t[r]),n.eq(7-s).fadeOut(t[r]),r++;n.eq(0).promise().done(function(){n.eq(3).fadeOut(t[1],function(){a.hide(1,function(){i.animate({"margin-top":-50}),i.slideDown(function(){})})})}),e.preventDefault(),$(".panel.tiles").on("click",".close",function(e){i.slideUp(function(){a.show(1,function(){n.fadeIn(t[1])})}),i.animate({"margin-top":0})})});var t=$(".panel.content");$.fn.pages=function(e){var t=$.extend({next:$(this).find(".tools .next"),prev:$(this).find(".tools .prev")},e);return this.each(function(){var e=$(this);t.next.on("click",function(t){if(console.log("next"),e.find(".items li.active").next().is("li")){var n=e.find(".items li.active"),a=n.next();a.animate({height:"100%"},1e3,"easeOutExpo",function(){a.addClass("active"),n.removeClass("active")})}t.preventDefault()}),t.prev.on("click",function(t){if(console.log("prev"),e.find(".items li.active").prev().is("li")){var n=e.find(".items li.active"),a=n.prev();a.animate({height:"100%"},1e3,"easeOutExpo",function(){a.addClass("active"),n.removeClass("active")})}t.preventDefault()})})},t.each(function(){$(this).pages({next:$(this).find(".next"),prev:$(this).find(".prev")})})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,a,i){return jQuery.easing[jQuery.easing.def](e,t,n,a,i)},easeInQuad:function(e,t,n,a,i){return a*(t/=i)*t+n},easeOutQuad:function(e,t,n,a,i){return-a*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,a,i){return(t/=i/2)<1?a/2*t*t+n:-a/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,a,i){return a*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,a,i){return a*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,a,i){return(t/=i/2)<1?a/2*t*t*t+n:a/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,a,i){return a*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,a,i){return-a*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,a,i){return(t/=i/2)<1?a/2*t*t*t*t+n:-a/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,a,i){return a*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,a,i){return a*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,a,i){return(t/=i/2)<1?a/2*t*t*t*t*t+n:a/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,a,i){return-a*Math.cos(t/i*(Math.PI/2))+a+n},easeOutSine:function(e,t,n,a,i){return a*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,a,i){return-a/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,a,i){return 0==t?n:a*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,a,i){return t==i?n+a:a*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,a,i){return 0==t?n:t==i?n+a:(t/=i/2)<1?a/2*Math.pow(2,10*(t-1))+n:a/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,a,i){return-a*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,a,i){return a*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,a,i){return(t/=i/2)<1?-a/2*(Math.sqrt(1-t*t)-1)+n:a/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,a,i){var r=1.70158,s=0,u=a;if(0==t)return n;if(1==(t/=i))return n+a;if(s||(s=.3*i),u<Math.abs(a)){u=a;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(a/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-r)*Math.PI/s))+n},easeOutElastic:function(e,t,n,a,i){var r=1.70158,s=0,u=a;if(0==t)return n;if(1==(t/=i))return n+a;if(s||(s=.3*i),u<Math.abs(a)){u=a;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(a/u);return u*Math.pow(2,-10*t)*Math.sin(2*(t*i-r)*Math.PI/s)+a+n},easeInOutElastic:function(e,t,n,a,i){var r=1.70158,s=0,u=a;if(0==t)return n;if(2==(t/=i/2))return n+a;if(s||(s=.3*i*1.5),u<Math.abs(a)){u=a;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(a/u);return 1>t?-.5*u*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-r)*Math.PI/s)+n:u*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-r)*Math.PI/s)*.5+a+n},easeInBack:function(e,t,n,a,i,r){return void 0==r&&(r=1.70158),a*(t/=i)*t*((r+1)*t-r)+n},easeOutBack:function(e,t,n,a,i,r){return void 0==r&&(r=1.70158),a*((t=t/i-1)*t*((r+1)*t+r)+1)+n},easeInOutBack:function(e,t,n,a,i,r){return void 0==r&&(r=1.70158),(t/=i/2)<1?a/2*t*t*(((r*=1.525)+1)*t-r)+n:a/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+n},easeInBounce:function(e,t,n,a,i){return a-jQuery.easing.easeOutBounce(e,i-t,0,a,i)+n},easeOutBounce:function(e,t,n,a,i){return(t/=i)<1/2.75?7.5625*a*t*t+n:2/2.75>t?a*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?a*(7.5625*(t-=2.25/2.75)*t+.9375)+n:a*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,a,i){return i/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,a,i)+n:.5*jQuery.easing.easeOutBounce(e,2*t-i,0,a,i)+.5*a+n}});
