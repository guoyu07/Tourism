$(function(){if($("body").scrollspy({target:"#menu"}),$("#menu a").click(function(e){if(-1!==$(this).attr("href").indexOf("#")){var n=$($(this).attr("href"));if(n.length&&n.hasClass("page")){var t=n.offset().top;$("html, body").animate({scrollTop:t},700,"easeInCubic")}e.preventDefault()}}),$(".slideshow").length){var e=$(".slideshow").not(".panorama");e.imagesLoaded(function(){e.find("ul.items").caroufredsel({items:1,auto:!1,responsive:!0,pagination:e.find(".pages"),next:e.find(".controls .next"),prev:e.find(".controls .prev"),scroll:{items:1,fx:"crossfade"}})})}$(".search form input[name=q]").keyup(function(e){var n=$(this),t=n.parents("form:first"),a=t.parent().find(".search-resluts");console.log(a),n.val().length>3&&"enter"!==e.key?(n.addClass("loading"),a.empty(),a.is(":hidden")||a.fadeOut("fast"),t.find("input[name=t]").val($.now()),t.find("input[name=format]").val("raw"),$.ajax({url:"index.php?option=com_k2&view=itemlist&task=search",type:"get",data:t.serialize(),success:function(e){n.removeClass("loading"),a.html(e).fadeIn("fast")}})):(a.empty(),a.is(":hidden")||a.fadeOut("fast"))}),$(document).on("focusout",".search form",function(){$(".search .search-resluts").fadeOut("fast")}).on("focusin",".search form",function(){$(".search .search-resluts").is(":empty")||$(".search .search-resluts").fadeIn("fast")}),$(".panel.tiles").on("click",".tiles a",function(e){for(var n=[300,500,600,600],t=$(".panel.tiles").find(".tiles li"),a=$(".panel.tiles").children(".tiles"),i=$(this),s=$(".panel.tiles").find(".itemlist"),r=0,u=1;4>u;u++)t.eq(u-1).fadeOut(n[r]),t.eq(7-u).fadeOut(n[r]),r++;t.eq(0).promise().done(function(){t.eq(3).fadeOut(n[1],function(){a.hide(1,function(){s.find(".inner").empty(),s.animate({"margin-top":-50}),s.slideDown(function(){$.ajax({url:i.attr("href"),type:"get",success:function(e){s.find(".inner").empty().html(e).slideDown()}})})})})}),e.preventDefault(),$(".panel.tiles").on("click",".close",function(e){s.slideUp(function(){a.show(1,function(){t.fadeIn(n[0])})}),s.animate({"margin-top":0},function(){s.find(".inner").hide(1)})})}),$(document).on("click",".panel.tiles .itemlist a",function(e){var n=$(this).attr("href");$.ajax({url:n,type:"get",data:"format=raw",success:function(e){$("#item-modal").find(".modal-body").empty().html(e),$("#item-modal").modal("show")}}),e.preventDefault()});var n=$(".panel.content");$.fn.pages=function(e){var n=$.extend({next:$(this).find(".tools .next"),prev:$(this).find(".tools .prev")},e);return this.each(function(){var e=$(this);n.next.on("click",function(n){if(console.log("next"),e.find(".items li.active").next().is("li")){var t=e.find(".items li.active"),a=t.next();a.animate({height:"100%"},1e3,"easeOutExpo",function(){a.addClass("active"),t.removeClass("active")})}n.preventDefault()}),n.prev.on("click",function(n){if(console.log("prev"),e.find(".items li.active").prev().is("li")){var t=e.find(".items li.active"),a=t.prev();a.animate({height:"100%"},1e3,"easeOutExpo",function(){a.addClass("active"),t.removeClass("active")})}n.preventDefault()})})},n.each(function(){$(this).pages({next:$(this).find(".next"),prev:$(this).find(".prev")})})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,n,t,a,i){return jQuery.easing[jQuery.easing.def](e,n,t,a,i)},easeInQuad:function(e,n,t,a,i){return a*(n/=i)*n+t},easeOutQuad:function(e,n,t,a,i){return-a*(n/=i)*(n-2)+t},easeInOutQuad:function(e,n,t,a,i){return(n/=i/2)<1?a/2*n*n+t:-a/2*(--n*(n-2)-1)+t},easeInCubic:function(e,n,t,a,i){return a*(n/=i)*n*n+t},easeOutCubic:function(e,n,t,a,i){return a*((n=n/i-1)*n*n+1)+t},easeInOutCubic:function(e,n,t,a,i){return(n/=i/2)<1?a/2*n*n*n+t:a/2*((n-=2)*n*n+2)+t},easeInQuart:function(e,n,t,a,i){return a*(n/=i)*n*n*n+t},easeOutQuart:function(e,n,t,a,i){return-a*((n=n/i-1)*n*n*n-1)+t},easeInOutQuart:function(e,n,t,a,i){return(n/=i/2)<1?a/2*n*n*n*n+t:-a/2*((n-=2)*n*n*n-2)+t},easeInQuint:function(e,n,t,a,i){return a*(n/=i)*n*n*n*n+t},easeOutQuint:function(e,n,t,a,i){return a*((n=n/i-1)*n*n*n*n+1)+t},easeInOutQuint:function(e,n,t,a,i){return(n/=i/2)<1?a/2*n*n*n*n*n+t:a/2*((n-=2)*n*n*n*n+2)+t},easeInSine:function(e,n,t,a,i){return-a*Math.cos(n/i*(Math.PI/2))+a+t},easeOutSine:function(e,n,t,a,i){return a*Math.sin(n/i*(Math.PI/2))+t},easeInOutSine:function(e,n,t,a,i){return-a/2*(Math.cos(Math.PI*n/i)-1)+t},easeInExpo:function(e,n,t,a,i){return 0==n?t:a*Math.pow(2,10*(n/i-1))+t},easeOutExpo:function(e,n,t,a,i){return n==i?t+a:a*(-Math.pow(2,-10*n/i)+1)+t},easeInOutExpo:function(e,n,t,a,i){return 0==n?t:n==i?t+a:(n/=i/2)<1?a/2*Math.pow(2,10*(n-1))+t:a/2*(-Math.pow(2,-10*--n)+2)+t},easeInCirc:function(e,n,t,a,i){return-a*(Math.sqrt(1-(n/=i)*n)-1)+t},easeOutCirc:function(e,n,t,a,i){return a*Math.sqrt(1-(n=n/i-1)*n)+t},easeInOutCirc:function(e,n,t,a,i){return(n/=i/2)<1?-a/2*(Math.sqrt(1-n*n)-1)+t:a/2*(Math.sqrt(1-(n-=2)*n)+1)+t},easeInElastic:function(e,n,t,a,i){var s=1.70158,r=0,u=a;if(0==n)return t;if(1==(n/=i))return t+a;if(r||(r=.3*i),u<Math.abs(a)){u=a;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(a/u);return-(u*Math.pow(2,10*(n-=1))*Math.sin(2*(n*i-s)*Math.PI/r))+t},easeOutElastic:function(e,n,t,a,i){var s=1.70158,r=0,u=a;if(0==n)return t;if(1==(n/=i))return t+a;if(r||(r=.3*i),u<Math.abs(a)){u=a;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(a/u);return u*Math.pow(2,-10*n)*Math.sin(2*(n*i-s)*Math.PI/r)+a+t},easeInOutElastic:function(e,n,t,a,i){var s=1.70158,r=0,u=a;if(0==n)return t;if(2==(n/=i/2))return t+a;if(r||(r=.3*i*1.5),u<Math.abs(a)){u=a;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(a/u);return 1>n?-.5*u*Math.pow(2,10*(n-=1))*Math.sin(2*(n*i-s)*Math.PI/r)+t:u*Math.pow(2,-10*(n-=1))*Math.sin(2*(n*i-s)*Math.PI/r)*.5+a+t},easeInBack:function(e,n,t,a,i,s){return void 0==s&&(s=1.70158),a*(n/=i)*n*((s+1)*n-s)+t},easeOutBack:function(e,n,t,a,i,s){return void 0==s&&(s=1.70158),a*((n=n/i-1)*n*((s+1)*n+s)+1)+t},easeInOutBack:function(e,n,t,a,i,s){return void 0==s&&(s=1.70158),(n/=i/2)<1?a/2*n*n*(((s*=1.525)+1)*n-s)+t:a/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+t},easeInBounce:function(e,n,t,a,i){return a-jQuery.easing.easeOutBounce(e,i-n,0,a,i)+t},easeOutBounce:function(e,n,t,a,i){return(n/=i)<1/2.75?7.5625*a*n*n+t:2/2.75>n?a*(7.5625*(n-=1.5/2.75)*n+.75)+t:2.5/2.75>n?a*(7.5625*(n-=2.25/2.75)*n+.9375)+t:a*(7.5625*(n-=2.625/2.75)*n+.984375)+t},easeInOutBounce:function(e,n,t,a,i){return i/2>n?.5*jQuery.easing.easeInBounce(e,2*n,0,a,i)+t:.5*jQuery.easing.easeOutBounce(e,2*n-i,0,a,i)+.5*a+t}});
